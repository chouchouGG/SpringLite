# çŸ¥è¯†ç‚¹æ€»ç»“

## Beanå’Œç»„ä»¶çš„å…³ç³»ï¼š
springä¸­çš„Beané€šå¸¸éƒ½æ˜¯æ— çŠ¶æ€ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå…¶ä½œç”¨å°±æ˜¯å®ç°æŸä¸ªåŠŸèƒ½çš„ã€‚*IOCå®¹å™¨* å¾—ä»¥å®ç°çš„åŸºç¡€æ˜¯ *åº”ç”¨ä¸Šä¸‹æ–‡ ApplicationContext* é€šè¿‡èµ„æºåŠ è½½å™¨åŠ è½½é…ç½®çš„èµ„æºæ–‡ä»¶ï¼Œé¢„å…ˆå°†beanè¿›è¡Œäº†Beanå®šä¹‰æ³¨å†Œ(ç»„ä»¶æ³¨å†Œ)ã€‚



## èµ„æºåŠ è½½å™¨çš„åŠŸèƒ½ï¼š

1. åŠ è½½ XML é…ç½®æ–‡ä»¶
2. è§£æ XML æ–‡ä»¶ï¼Œæå– `<bean>` æ ‡ç­¾
3. æ³¨å†Œ Bean çš„é…ç½®ä¿¡æ¯ï¼šå°† `<bean>` æ ‡ç­¾çš„é…ç½®ä¿¡æ¯é€šè¿‡ä¸€ä¸ª `BeanDefinition` è¡¨ç¤ºï¼ˆç”¨äºå°è£… Bean çš„é…ç½®ä¿¡æ¯ï¼‰ï¼Œå¹¶æ³¨å†Œåˆ° `DefaultListableBeanFactory` çš„Mapé›†åˆä¸­ 
> BeanDefinitionï¼šç”¨äºæè¿°ä¸€ä¸ª *Bean* æœ¬èº«ï¼Œ*BeanDefinition* åŒ…æ‹¬äº† *Bean* çš„å„ç§é…ç½®ä¿¡æ¯åŠå…ƒæ•°æ®ï¼Œå¦‚ *Bean* çš„ *Class å¯¹è±¡*ï¼Œ*Bean* çš„å±æ€§æ³¨å…¥ä¿¡æ¯ï¼Œ*Bean* çš„ä½œç”¨åŸŸï¼ˆæ˜¯å¦ä¸ºå•ä¾‹ï¼‰ï¼Œé…ç½®çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œæ˜¯å¦æ‡’åŠ è½½ç­‰



## Aopçš„å®ç°æ–¹å¼ï¼š

1. åŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†
2. åŸºäºç±»çš„CGLIBä»£ç†



## åˆ‡å…¥ç‚¹è¡¨è¾¾å¼åŠŸèƒ½ä¸Šåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š

> ğŸ¥• åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å®šä¹‰äº†å“ªäº›ç±»å’Œæ–¹æ³•éœ€è¦è¢«æ‹¦æˆªã€‚
1. <span style="color: red;"><strong>ç±»åŒ¹é…ï¼š</strong></span> åº”ç”¨ç¨‹åºè·å–æŸä¸ª *Bean* æ—¶ï¼Œå…ˆä¸é¢„å…ˆé…ç½®çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¿›è¡Œç±»åŒ¹é…çš„æ£€æŸ¥ï¼Œå¦‚æœç±»åŒ¹é…é€šè¿‡ï¼Œå°±éœ€è¦åˆ›å»º *AOP* ä»£ç†å¯¹è±¡ã€‚
2. <span style="color: red;"><strong>æ–¹æ³•åŒ¹é…ï¼š</strong></span> é€šè¿‡ *AOP* ä»£ç†å¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šå°†æ–¹æ³•è°ƒç”¨å§”æ‰˜ç»™ `InvocationHandler` ä¸­çš„ `invoke` æ–¹æ³•ï¼Œæ¥ç€é€šè¿‡åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¿›è¡Œå…·ä½“çš„æ–¹æ³•åŒ¹é…ï¼Œå¦‚æœæ–¹æ³•åŒ¹é…é€šè¿‡å°±éœ€è¦å°†æ–¹æ³•è°ƒç”¨å§”æ‰˜ç»™ç›¸åº”çš„ *æ‹¦æˆªå™¨*ï¼Œç”±æ‹¦æˆªå™¨è´Ÿè´£è°ƒç”¨ *é€šçŸ¥é€»è¾‘* å’Œ *åŸæ–¹æ³•é€»è¾‘*ã€‚



## IOC å®¹å™¨åˆå§‹åŒ–ï¼š

### IOC å®¹å™¨åˆå§‹åŒ–åŒ…æ‹¬ï¼š

1. å°† XML æ ¼å¼çš„ Bean å®šä¹‰é…ç½®æ–‡ä»¶åŠ è½½å¹¶è§£æä¸º BeanDefinitionã€‚
2. å°† BeanDefiniton ä¿å­˜ï¼ˆæ³¨å†Œï¼‰åˆ° beanDefinitionMap ä¸­ã€‚

> beanDefinitionMap æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª `ConcurrentHashMap<String, BeanDefinition>`

### IOC å®¹å™¨åˆå§‹åŒ–æµç¨‹å›¾ï¼š

![image-20240719184001477](çŸ¥è¯†ç‚¹æ€»ç»“.assets/image-20240719184001477.png)





## åŒ¿åå†…éƒ¨ç±»ï¼š

``` Java
public class OuterClass {

    private String message = "Hello from OuterClass!";

    // å°é—­ç±»çš„å®ä¾‹æ–¹æ³•ï¼Œå¸¦æœ‰å‚æ•°
    public void outerMethod(String name, Object value) {
        System.out.println("This is a method in OuterClass. Message: " + message + ", Name: " + name + ", Value: " + value);
    }

    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼ŒåŒ…å«åŒ¿åå†…éƒ¨ç±»
    public void createAnonymousClass(String name, Object value) {
        // åŒ¿åå†…éƒ¨ç±»
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                // è°ƒç”¨å°é—­ç±»çš„å®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¼ é€’å‚æ•°
                outerMethod(name, value);
            }
        };

        // å¯åŠ¨çº¿ç¨‹ï¼Œæ‰§è¡ŒåŒ¿åå†…éƒ¨ç±»çš„runæ–¹æ³•
        new Thread(runnable).start();
    }

    public static void main(String[] args) {
        OuterClass outer = new OuterClass();
        outer.createAnonymousClass("TestName", 123);
    }
}
```

ç¼–è¯‘åï¼Œå†åç¼–è¯‘å¾—åˆ°çš„åŒ¿åå†…éƒ¨ç±»çš„ *Java* ä»£ç ï¼š

```java
public class OuterClass$1 implements Runnable {
    final OuterClass this$0;
    final String val$name;
    final Object val$value;

    OuterClass$1(OuterClass outerClass, String name, Object value) {
        this.this$0 = outerClass;
        this.val$name = name;
        this.val$value = value;
    }

    @Override
    public void run() {
        this.this$0.outerMethod(this.val$name, this.val$value);
    }
}
```



## å•ä¾‹ Bean å†…éƒ¨ä¾èµ–äºåŸå‹ä½œç”¨åŸŸçš„ Beanï¼š

### ç¤ºä¾‹è¯´æ˜ï¼š

#### é…ç½®æ–‡ä»¶ï¼ˆbeans.xmlï¼‰

```xml
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- å®šä¹‰ä¸€ä¸ªåŸå‹ä½œç”¨åŸŸçš„Bean -->
    <bean id="prototypeBean" class="com.example.PrototypeBean" scope="prototype"/>
    
    <!-- å®šä¹‰ä¸€ä¸ªå•ä¾‹Beanï¼Œæ³¨å…¥åŸå‹Bean -->
    <bean id="singletonBean" class="com.example.SingletonBean">
        <property name="prototypeBean" ref="prototypeBean"/>
    </bean>
</beans>
```

#### Javaç±»å®šä¹‰

##### PrototypeBean.java

```Java
public class PrototypeBean {
    public PrototypeBean() {
        System.out.println("PrototypeBean instance created: " + this);
    }

    public void doSomething() {
        System.out.println("Doing something in PrototypeBean: " + this);
    }
}
```

##### SingletonBean.java

```java
public class SingletonBean {
    private PrototypeBean prototypeBean;

    public void setPrototypeBean(PrototypeBean prototypeBean) {
        this.prototypeBean = prototypeBean;
    }

    public void doSomething() {
        System.out.println("SingletonBean is doing something.");
        prototypeBean.doSomething();
    }
}
```

##### MainApp.java

```Java
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");

        SingletonBean singletonBean1 = (SingletonBean) context.getBean("singletonBean");
        singletonBean1.doSomething();

        SingletonBean singletonBean2 = (SingletonBean) context.getBean("singletonBean");
        singletonBean2.doSomething();

        // æ£€æŸ¥SingletonBeançš„å®ä¾‹æ˜¯å¦ç›¸åŒ
        System.out.println("SingletonBean instances are the same: " + (singletonBean1 == singletonBean2));
    }
}
```

### é¢„æœŸè¾“å‡º

```shell
PrototypeBean instance created: com.example.PrototypeBean@1d251891
SingletonBean is doing something.
Doing something in PrototypeBean: com.example.PrototypeBean@1d251891
PrototypeBean instance created: com.example.PrototypeBean@6d6f6e28
SingletonBean is doing something.
Doing something in PrototypeBean: com.example.PrototypeBean@6d6f6e28
SingletonBean instances are the same: true
```

### ç»“è®ºæ€»ç»“ï¼š

- å°½ç®¡ `singletonBean1` å’Œ `singletonBean2` æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ *Bean*ï¼‰ï¼Œä½† `prototypeBean` æ˜¯ä¸åŒçš„å®ä¾‹ï¼ˆåŸå‹ *Bean*ï¼‰ï¼Œå› ä¸ºæ¯æ¬¡æ³¨å…¥ `prototypeBean` éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚
- `singletonBean1 == singletonBean2` è¿”å› `true`ï¼Œè¡¨ç¤º `SingletonBean` æ˜¯å•ä¾‹çš„ï¼Œå•ä¾‹ *Bean* çš„å®ä¾‹åœ¨æ•´ä¸ªå®¹å™¨ä¸­æ˜¯å”¯ä¸€çš„ã€‚
- å¦‚æœå•ä¾‹ *Bean* å†…éƒ¨ä¾èµ–äºåŸå‹ä½œç”¨åŸŸçš„ *Bean*ï¼Œæ¯æ¬¡è·å–è¯¥å•ä¾‹ *Bean* æ—¶ï¼Œå…¶å†…éƒ¨çš„åŸå‹ *Bean* å®ä¾‹éƒ½ä¼šè¢«é‡æ–°æ³¨å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è°ƒç”¨å•ä¾‹ *Bean* çš„æ–¹æ³•æ—¶ï¼ŒåŸå‹ *Bean* éƒ½ä¼šæ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚



## æ„é€ å™¨æ³¨å…¥ã€Setteræ³¨å…¥ã€å­—æ®µæ³¨å…¥å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ

ä»è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜æ¥çœ‹ï¼Œ*æ„é€ å™¨æ³¨å…¥* å’Œ *Setter æ³¨å…¥/å­—æ®µæ³¨å…¥* å¯ä»¥è¢«è§†ä½œä¸åŒçš„ç±»åˆ«ã€‚

### 1. **æ„é€ å™¨æ³¨å…¥**

**æ„é€ å™¨æ³¨å…¥** ä¾èµ–äºæ„é€ å‡½æ•°å‚æ•°æ¥æ³¨å…¥ä¾èµ–ã€‚åœ¨ Bean çš„åˆ›å»ºè¿‡ç¨‹ä¸­ï¼ŒSpring éœ€è¦åœ¨æ„é€ å‡½æ•°è°ƒç”¨æ—¶å°±æä¾›æ‰€æœ‰ä¾èµ–ã€‚å¦‚æœå‡ºç°å¾ªç¯ä¾èµ–ï¼ŒSpring æ— æ³•å®Œæˆæ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ä¼šå¯¼è‡´åˆ›å»ºå¤±è´¥ã€‚

- å¾ªç¯ä¾èµ–é—®é¢˜ï¼š
  - æ„é€ å™¨æ³¨å…¥æ— æ³•å¤„ç†å¾ªç¯ä¾èµ–ï¼Œå› ä¸ºæ‰€æœ‰ä¾èµ–é¡¹å¿…é¡»åœ¨æ„é€ å‡½æ•°è°ƒç”¨ä¹‹å‰å‡†å¤‡å¥½ã€‚å¦‚æœ `BeanA` ä¾èµ– `BeanB`ï¼Œè€Œ `BeanB` åˆä¾èµ– `BeanA`ï¼ŒSpring ä¼šåœ¨å°è¯•åˆ›å»º `BeanA` æ—¶é‡åˆ° `BeanB` è¿˜æœªåˆ›å»ºçš„æƒ…å†µï¼Œåä¹‹äº¦ç„¶ã€‚
- è§£å†³æ–¹å¼ï¼š
  - **æŠ¥é”™**ï¼šæ„é€ å™¨æ³¨å…¥è¦æ±‚æ‰€æœ‰ä¾èµ–åœ¨ Bean å®ä¾‹åŒ–æ—¶å³éœ€æä¾›ï¼ŒSpring ä¼šåœ¨å¯åŠ¨æ—¶æ£€æµ‹åˆ°è¿™ç§å¾ªç¯ä¾èµ–é—®é¢˜å¹¶æŠ›å‡º `BeanCurrentlyInCreationException` å¼‚å¸¸ã€‚

### 2. **Setter æ³¨å…¥å’Œå­—æ®µæ³¨å…¥**

**Setter æ³¨å…¥** å’Œ **å­—æ®µæ³¨å…¥** éƒ½å‘ç”Ÿåœ¨ Bean å®ä¾‹åŒ–ä¹‹åçš„åˆå§‹åŒ–é˜¶æ®µã€‚å®ƒä»¬ä¾èµ–äº Spring çš„ä¸‰çº§ç¼“å­˜æœºåˆ¶æ¥å¤„ç†å¾ªç¯ä¾èµ–ã€‚

- **<span style = "color: red;">ä¸‰çº§ç¼“å­˜æœºåˆ¶ </span>**ï¼š
  - **ä¸€çº§ç¼“å­˜**ï¼šå•ä¾‹å¯¹è±¡ç¼“å­˜æ± ï¼Œå·²ç»å®ä¾‹åŒ–å¹¶ä¸”å±æ€§èµ‹å€¼ï¼Œè¿™é‡Œçš„å¯¹è±¡æ˜¯**æˆç†Ÿå¯¹è±¡**ï¼›
  - **äºŒçº§ç¼“å­˜**ï¼šå•ä¾‹å¯¹è±¡ç¼“å­˜æ± ï¼Œå·²ç»å®ä¾‹åŒ–ä½†å°šæœªå±æ€§èµ‹å€¼ï¼Œè¿™é‡Œçš„å¯¹è±¡æ˜¯**æ—©æœŸå¯¹è±¡/åŠæˆå“å¯¹è±¡**ï¼›
  - **ä¸‰çº§ç¼“å­˜**ï¼ˆå¾…åˆ›å»ºçš„ Beanï¼‰ï¼šå•ä¾‹å·¥å‚çš„ç¼“å­˜...<span style = "color: blue;">ï¼ˆåç»­è¿›è¡Œè¡¥å……ï¼‰</span>ã€‚
- **å¤„ç†å¾ªç¯ä¾èµ–**ï¼š
  - **Setter æ³¨å…¥** å’Œ **å­—æ®µæ³¨å…¥** çš„ä¾èµ–é¡¹åœ¨ Bean å®ä¾‹åŒ–ä¹‹åè¢«æ³¨å…¥ï¼Œè¿™ä½¿å¾— Spring å¯ä»¥åœ¨ Bean å®ä¾‹åŒ–è¿‡ç¨‹ä¸­è§£å†³éƒ¨åˆ†å¾ªç¯ä¾èµ–é—®é¢˜ã€‚ç”±äºä¾èµ–æ³¨å…¥å‘ç”Ÿåœ¨å®ä¾‹åŒ–ä¹‹åï¼ŒSpring å¯ä»¥åˆ©ç”¨ç¼“å­˜ä¸­æå‰æš´éœ²çš„ Bean å®ä¾‹æ¥å®Œæˆæ³¨å…¥ï¼Œä»è€Œç»•è¿‡æ„é€ å™¨æ³¨å…¥å¸¦æ¥çš„é™åˆ¶ã€‚

### ç»“è®º

- **æ„é€ å™¨æ³¨å…¥**ï¼š
  - **æ— æ³•å¤„ç†** å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå› ä¸ºæ„é€ å™¨æ³¨å…¥éœ€è¦æ‰€æœ‰ä¾èµ–åœ¨ Bean å®ä¾‹åŒ–æ—¶å°±å·²æä¾›ã€‚Spring åœ¨åˆ›å»º Bean æ—¶ä¼šç«‹å³æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚
- **Setter æ³¨å…¥å’Œå­—æ®µæ³¨å…¥**ï¼š
  - **å¯ä»¥å¤„ç†** å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬çš„ä¾èµ–æ³¨å…¥å‘ç”Ÿåœ¨ Bean å®ä¾‹åŒ–ä¹‹åã€‚Spring å¯ä»¥åˆ©ç”¨ä¸‰çº§ç¼“å­˜æœºåˆ¶è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå…è®¸ Bean åœ¨å®ä¾‹åŒ–æ—¶ç›¸äº’å¼•ç”¨ã€‚

å› æ­¤ï¼Œä»è§£å†³å¾ªç¯ä¾èµ–çš„è§’åº¦æ¥çœ‹ï¼Œæ„é€ å™¨æ³¨å…¥å±äºä¸€ç±»ï¼Œè€Œ Setter æ³¨å…¥å’Œå­—æ®µæ³¨å…¥å±äºå¦ä¸€ç±»ã€‚æ„é€ å™¨æ³¨å…¥åœ¨é‡åˆ°å¾ªç¯ä¾èµ–æ—¶ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ Setter æ³¨å…¥å’Œå­—æ®µæ³¨å…¥é€šè¿‡ä¸‰çº§ç¼“å­˜æœºåˆ¶å¯ä»¥åœ¨å®ä¾‹åŒ–ä¹‹åå¤„ç†å¾ªç¯ä¾èµ–ã€‚



## ä¾èµ–æ³¨å…¥å¯¼è‡´çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼š

å¾ªç¯ä¾èµ–äº§ç”Ÿçš„åŸå› ï¼šå°±æ˜¯ Spring æä¾›çš„ä¾èµ–æ³¨å…¥åŠŸèƒ½å¯¼è‡´çš„ï¼Œå¦‚æœ `BeanA` ä¾èµ– `BeanB`ï¼Œè€Œ `BeanB` åˆä¾èµ– `BeanA`ï¼Œé‚£ä¹ˆåˆ›å»º `BeanA` æ—¶ä¼šé€’å½’åˆ›å»º `BeanB`ï¼Œè€Œåœ¨åˆ›å»º `BeanB` æ—¶åˆä¼šé€’å½’åˆ›å»º `BeanA`ï¼Œè¿™æ ·å°±å¯¼è‡´äº†æ— é™é€’å½’ï¼Œæœ€ç»ˆæŠ›å‡º `StackOverFlow` æ ˆå†…å­˜æº¢å‡ºé”™è¯¯ã€‚

Spring è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜çš„æ ¸å¿ƒæ˜¯ä¸‰çº§ç¼“å­˜ã€‚å°† Bean çš„ **å®ä¾‹åŒ–** å’Œ **ä¾èµ–æ³¨å…¥** ä¸¤æ­¥æ“ä½œåˆ†ç¦»å¼€æ¥ï¼Œå¹¶é€šè¿‡ä¸‰çº§ç¼“å­˜å°†å®ä¾‹åŒ–åçš„ Bean æå‰æš´éœ²ä»è€Œè§£å†³å¾ªç¯ä¾èµ–ã€‚

```Java
addSingletonFactory(beanName, new ObjectFactory<Object>() {
    			@Override
                public Object getObject() throws BeansException {
                    return (AbstractAutowireCapableBeanFactory.this).getEarlyBeanReference(beanName, beanDefinition, finalBean);
                }
            });
```

**Spirng åŸºäºç¼“å­˜è§£å†³çš„å¾ªç¯ä¾èµ–åªé’ˆå¯¹äºå•ä¾‹ Beanï¼Œä¹Ÿå°±æ˜¯è¯´ Spirng åªèƒ½è§£å†³å•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œä¸èƒ½è§£å†³éå•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–é—®é¢˜ã€‚**åŸå› å°±åœ¨äº Spring è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜é çš„æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œè€Œéå•ä¾‹ Bean ä¸ä¼šæ”¾åˆ°ç¼“å­˜ä¸­æèµ·æš´éœ²å‡ºæ¥ï¼Œä»è€Œä¹Ÿå°±æ— æ³•è§£å†³å¾ªç¯ä¾èµ–ã€‚



## ç†è§£ Spring ä¸­ Bean çš„ç”Ÿå‘½å‘¨æœŸçš„é‡è¦æ„ä¹‰ï¼š

> ğŸ¥‘ Spring åªç®¡ç†å•ä¾‹ Bean çš„**å®Œæ•´**ç”Ÿå‘½å‘¨æœŸï¼ˆå®ä¾‹åŒ–ã€åˆå§‹åŒ–ã€é”€æ¯ï¼‰ï¼›å¯¹äºåŸå‹ bean è€Œè¨€ï¼ŒSpring åªè´Ÿè´£å…¶ç”Ÿå‘½å‘¨æœŸä¸­å®ä¾‹åŒ–ã€åˆå§‹åŒ–é˜¶æ®µï¼Œåœ¨åˆ›å»ºå®Œæˆåï¼ŒSpring å°†å…¶äº¤ç»™ç”¨æˆ·è‡ªè¡Œç®¡ç†ã€‚

<span style = "color: purple;"> Spring å¯¹äº Bean çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº†å®Œæ•´çš„å®šä¹‰çš„æ„ä¹‰åœ¨äºï¼ŒSpring å¯ä»¥é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µæä¾›ç›¸åº”çš„**é’©å­æ–¹æ³•**ï¼Œæ¥å…è®¸å¼€å‘è€…åœ¨**ç‰¹å®šçš„æ—¶é—´èŠ‚ç‚¹**æ·»åŠ **è‡ªå®šä¹‰çš„é€»è¾‘**ã€‚</span>

> ğŸ« å¯¹äºSpringåŠŸèƒ½ä¸Šçš„æ‰©å±•ï¼ˆå¦‚ï¼šAOPï¼‰éƒ½æ˜¯åŸºäºç”Ÿå‘½å‘¨æœŸä¸­å®šä¹‰çš„é’©å­æ–¹æ³•æ¥å®ç°ï¼Œå¯ä»¥è¯´é’©å­æ–¹æ³•æ˜¯Spring åŠŸèƒ½æ‰©å±•çš„åŸºç¡€ã€‚

é’©å­æ–¹æ³•ä¸»è¦ä¸ä¸‰ä¸ªæ¥å£ç›¸å…³ï¼š

1. `BeanFactoryPostProcessor`ï¼š

   **ä½œç”¨**ï¼šåœ¨ Spring å®¹å™¨**åˆ›å»ºå¹¶åŠ è½½ Bean å®šä¹‰å**æ·»åŠ è‡ªå®šä¹‰é€»è¾‘ã€‚

   **ä¸»è¦æ–¹æ³•**ï¼š

   - ``` java
     postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)
     ```

2. `BeanPostProcessor`ï¼š

   **ä½œç”¨**ï¼šåœ¨ Bean **åˆå§‹åŒ–**é˜¶æ®µæ·»åŠ è‡ªå®šä¹‰é€»è¾‘ã€‚

   **ä¸»è¦æ–¹æ³•**ï¼š

   - ```java
     postProcessBeforeInitialization(Object bean, String beanName)
     ```

   - ```java
     postProcessAfterInitialization(Object bean, String beanName)
     ```

3. `InitializationAwareBeanPostProcessor`ï¼š

   **ä½œç”¨**ï¼šåœ¨ Bean **å®ä¾‹åŒ–**é˜¶æ®µæ·»åŠ è‡ªå®šä¹‰é€»è¾‘ã€‚

   - ```java
     postProcessBeforeInstantiation(Class<?> beanClass, String beanName)
     ```

   - ```java
     postProcessAfterInstantiation(Object bean, String beanName)
     ```

<span style = "color: purple;">Â **é€šè¿‡è¿™äº›é’©å­æ–¹æ³•ï¼ŒSpring å…è®¸å¼€å‘è€…åœ¨ Bean ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µè¿›è¡Œæ‰©å±•å’Œè‡ªå®šä¹‰æ“ä½œï¼Œä»è€Œæå‡ç³»ç»Ÿçš„åŠŸèƒ½å’Œçµæ´»æ€§ã€‚**</span>





















 